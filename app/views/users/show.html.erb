<p id="notice"><%= notice %></p>

<%= link_to 'Criar nova sala', new_room_url %>

<h2>All rooms</h2>

<% @rooms.each do |room| %>
  <h3> <%= room.user.username %> </h3>
  - <%= link_to 'acessar', room.link, target: "_blank" %> <br/>
  - <%= t room.language.name %> <br/>
  - <%= t room.level %> <br/>
  - <%= t time_ago_in_words room.created_at %> <br/>
  <button type="button" onclick="shareOnFacebook('<%= room.link %>')">share on fb!</button>
  <button type="button" onclick="shareOnTwitter('<%= room.link %>')">share on twitter!</button>
  <% if can? :update, room %>
    <%= link_to 'Edit', edit_room_path(room) %>
  <% end %>
  <% if can? :destroy, room %>
    <td><%= link_to 'Destroy', room, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  <% end %>
  <hr>
<% end %>

<script type="text/javascript">
  var WIN_TOP = (screen.height / 2) - (350 / 2);
  var WIN_LEFT = (screen.width / 2) - (520 / 2);

  function shareOnFacebook(link){
    window.open("https://www.facebook.com/sharer/sharer.php?u="+ encodeURIComponent(link), "pop", "width=600, height=400, scrollbars=no, top="+WIN_TOP+", left="+ WIN_LEFT);
    return false;
  }

  function shareOnTwitter(link){
    var text = "Replace this with your text";
    window.open('http://twitter.com/share?url='+encodeURIComponent(link)+'&text='+encodeURIComponent(text), '', 'left='+WIN_LEFT+',top='+WIN_TOP+',width=600,height=450,personalbar=0,toolbar=0,scrollbars=0');
  }
</script>
